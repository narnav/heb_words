import sqlite3
import numpy as np
from sentence_transformers import SentenceTransformer

# Load model (e.g., 'all-MiniLM-L6-v2' is fast & good)
model = SentenceTransformer('all-MiniLM-L6-v2')

# Connect to database
conn = sqlite3.connect("vocab.db")
cursor = conn.cursor()
def add_words():
    # Create table (if not exists)
    cursor.execute("""
    CREATE TABLE IF NOT EXISTS vocabulary (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        word TEXT NOT NULL UNIQUE,
        definition TEXT NOT NULL,
        embedding BLOB NOT NULL
    )
    """)

    # Add words with embeddings
    words = [
    ("נאה", "יפה"),
    ("אומץ", "תעוזה"),
    ("חרון", "כעס גדול"),
    ("נחלה", "ירושה או אחוזה"),
    ("כיסופים", "געגועים עזים"),
    ("מזור", "תרופה או הקלה"),
    ("כילי", "קמצן מאוד"),
    ("שנינה", "חוכמה או חדות לשון"),
    ("תדהמה", "הפתעה מלווה בהלם"),
    ("תיעוב", "גועל נפש או סלידה עזה"),
    
    ("תמורה", "שכר או תוצאה"),
    ("שלהי", "סיום, סוף תקופה"),
    ("הבלגה", "איפוק, הימנעות מתגובה"),
    ("רטוריקה", "תורת הנאום והשכנוע"),
    ("פזיז", "מהיר מידי וללא מחשבה"),
    ("צחור", "לבן מאוד"),
    ("בער", "חסר השכלה"),
    ("חזון", "ראיית עתיד, שאיפה"),
    ("שלולית", "מים עומדים קטנים"),
    ("תובנה", "הבנה עמוקה"),

    ("רתיעה", "חוסר רצון או פחד מלבצע"),
    ("ספקולציה", "השערה ללא ודאות"),
    ("בלבול", "חוסר סדר או הבנה"),
    ("שיגרה", "משהו שחוזר על עצמו"),
    ("התנצחות", "ויכוח או עימות מילולי"),
    ("עוגן", "משהו שמייצב או מחזיק"),
    ("ארכאי", "שייך לעבר, מיושן"),
    ("אוטופי", "שייך לעולם מושלם ודמיוני"),
    ("מחווה", "מעשה סמל או כוונה"),
    ("אי-ודאות", "חוסר ידיעה מה יקרה"),

    ("תסמין", "סימן למחלה"),
    ("נדיב", "נותן ברוחב לב"),
    ("נרגן", "נוטה להתלונן כל הזמן"),
    ("יסוד", "בסיס, מרכיב חשוב"),
    ("שכיח", "נפוץ"),
    ("מובהק", "ברור, בולט"),
    ("פנאי", "זמן חופשי"),
    ("תחבולה", "תכסיס, תרגיל ערמומי"),
    ("שפל", "מצב ירוד מאוד"),
    ("שואף", "רוצה מאוד להשיג"),

    ("מפלט", "מקום מקלט או בריחה"),
    ("שיג ושיח", "דיון מעמיק"),
    ("דממה", "שקט מוחלט"),
    ("הוקעה", "גינוי פומבי חריף"),
    ("תרעומת", "כעס שמביעים כלפי עוול"),
    ("צידוק", "הצדקה למשהו"),
    ("תעוב", "שנאה עזה, סלידה"),
    ("משגה", "טעות"),
    ("חמלה", "רחמים מתוך הזדהות"),
    ("רפיון", "חולשה, איבוד כוח"),

    ("קנאה", "רצון במה שיש לאחר"),
    ("בוז", "זלזול, חוסר הערכה"),
    ("מועקה", "תחושת כובד נפשי או לחץ"),
    ("עקשנות", "התעקשות עיקשת, ללא ויתור"),
    ("תהודה", "החזרה של קול או רעיון"),
    ("נוקשה", "לא גמיש, לא מוכן לשינוי"),
    ("שרירותי", "לא מבוסס על היגיון או צדק"),
    ("תגרה", "ריב אלים, קטטה"),
    ("מאומה", "שום דבר"),
    ("דלות", "עוני, חוסר משאבים"),

    ("ערירי", "ללא משפחה או קרובים"),
    ("רושם", "התרשמות או תחושת פתיחה"),
    ("תוהו", "בלבול, חוסר סדר"),
    ("בריר", "שביר מאוד"),
    ("מצוקה", "קושי נפשי או גופני חמור"),
    ("חידלון", "כישלון גמור, אובדן תקווה"),
    ("השפלה", "פגיעה בכבוד"),
    ("תשישות", "עייפות קיצונית"),
    ("ספק", "חוסר ודאות או אמון"),
    ("סירוב", "אמירה של לא"),

    ("אחיזה", "שליטה או תפיסה"),
    ("היסוס", "אי-ביטחון לפני החלטה"),
    ("פיתוי", "משיכה חזקה לעשיית דבר"),
    ("התמרדות", "מרד נגד סמכות"),
    ("צייתנות", "ציות, התנהגות ממושמעת"),
    ("חרטה", "צער על טעות שנעשתה"),
    ("גאולה", "הצלה או שחרור"),
    ("הרהור", "מחשבה שקטה"),
    ("סלידה", "תחושת דחייה חזקה"),
    ("נדודי שינה", "קושי להירדם או לישון"),


    ("רמז", "הצעה מרומזת, קריצה למשהו"),
    ("נרפה", "עצלן או חסר כוח"),
    ("סהרורי", "במצב תודעה מעורפל, חולם"),
    ("לקות", "פגם או חוסר יכולת"),
    ("שחיקה", "איבוד איכות לאורך זמן"),
    ("ענווה", "צניעות, הימנעות מהתרברבות"),
    ("רתיעה", "חוסר רצון לפעול או להתקרב"),
    ("נבצר", "לא ניתן לבצע"),
    ("הסתייגות", "אי-הסכמה חלקית"),
    ("תככים", "תחבולות מאחורי הקלעים"),

    ("גחמה", "רצון רגעי ולא הגיוני"),
    ("קוצר רוח", "חוסר סבלנות"),
    ("התנשאות", "התנהגות מתוך תחושת עליונות"),
    ("תיעול", "הכוונה למטרה מסוימת"),
    ("איפוק", "שליטה עצמית"),
    ("איבה", "שנאה עזה"),
    ("נחישות", "החלטיות, כוח רצון חזק"),
    ("הוקרה", "כבוד והערכה"),
    ("שאננות", "אדישות מסוכנת, ביטחון מופרז"),
    ("נפוץ", "שכיח, מצוי"),

    ("הידלדלות", "הפחתה, הפיכה לדל"),
    ("ביטול עצמי", "חוסר הערכה כלפי עצמך"),
    ("שאיפה", "רצון עז להשיג משהו"),
    ("רפיון משמעת", "חוסר הקפדה על כללים"),
    ("קיפאון", "חוסר תנועה או התקדמות"),
    ("מפלה", "כישלון גדול, הפסד מוחלט"),
    ("תחושת כישלון", "הרגשה של אי-הצלחה"),
    ("עקבה", "מכשול בדרך"),
    ("התמודדות", "ניסיון לפתרון בעיה או אתגר"),
    ("היענות", "תגובה חיובית או שיתוף פעולה"),

    ("צחיחות", "יובש קיצוני"),
    ("מועקה", "תחושת לחץ או עצבות פנימית"),
    ("מהות", "העיקר, התוכן המרכזי"),
    ("השגה", "קבלת דבר או הגעה אליו"),
    ("עימות", "מפגש חזיתי בין דעות או צדדים"),
    ("אדישות", "חוסר עניין או תגובה"),
    ("הסתגרות", "התבודדות, התרחקות מהסביבה"),
    ("רצון עז", "שאיפה פנימית חזקה"),
    ("כובד ראש", "רצינות יתרה"),
    ("היסח דעת", "איבוד ריכוז")

]


    # Insert with embeddings
    for word, definition in words:
        emb = model.encode(word)  # vector as np.ndarray
        emb_bytes = emb.astype(np.float32).tobytes()  # store as BLOB
        try:
            cursor.execute("INSERT INTO vocabulary (word, definition, embedding) VALUES (?, ?, ?)",
                        (word, definition, emb_bytes))
        except:
            pass

    conn.commit()
    conn.close()
# ##################################### end building DB